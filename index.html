<!DOCTYPE html>
<html>
<head>
<title>Asmaa's Staff Schedule Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#1e3c72,#2a5298);
    padding:20px;
    margin:0;
}

/* MAIN CONTAINER */
.container{
    background:#ffffff;
    padding:25px;
    border-radius:12px;
    box-shadow:0 15px 35px rgba(0,0,0,0.3);
    max-width:1200px;
    margin:auto;
}

/* HEADINGS */
h2{
    text-align:center;
    color:#1e3c72;
    margin-bottom:20px;
}

h3{
    margin-top:30px;
    color:#2a5298;
}

.section{
    margin-bottom:20px;
}

/* INPUTS + BUTTONS */
input,select,button{
    padding:8px;
    border-radius:6px;
    border:1px solid #ccc;
    margin:5px 3px;
    font-size:14px;
}

button{
    background:#1e3c72;
    color:white;
    border:none;
    cursor:pointer;
    transition:0.3s;
}

button:hover{
    background:#16305c;
}

/* TABLES */
table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
    min-width:800px; /* Prevent squeeze */
}

th{
    background:#1e3c72;
    color:white;
    padding:10px;
    font-size:14px;
}

td{
    border-bottom:1px solid #ddd;
    padding:8px;
    text-align:center;
    font-size:13px;
}

/* SPECIAL COLORS */
.holiday{ background:#ffe699; }
.sunday{ background:#f2f2f2; }
.leave{ background:#ffcccc; }
.halfday{ background:#c6f5c6; }

/* SCROLL WRAPPER FOR TABLES */
#execConfig, #scheduleArea{
    overflow-x:auto;
    width:100%;
}

/* FOOTER */
.footer{
    text-align:center;
    margin-top:20px;
    font-size:12px;
    color:#666;
}

/* ========================= */
/* MOBILE RESPONSIVE DESIGN  */
/* ========================= */

@media (max-width: 768px){

body{
    padding:10px;
}

.container{
    padding:15px;
}

input,select{
    width:100%;
    box-sizing:border-box;
}

button{
    width:100%;
    margin-top:8px;
}

.section{
    display:flex;
    flex-direction:column;
}

h2{
    font-size:20px;
}

h3{
    font-size:16px;
}

table{
    font-size:12px;
}

th, td{
    padding:6px;
}

}

/* PRINT OPTIMIZATION */
@media print{
body{
    background:white;
}

button{
    display:none;
}
}
</style>
</head>

<body>

<div class="container">

<h2>Fujairah Showroom Scheduler</h2>

<div class="section">
From: <input type="date" id="startDate">
To: <input type="date" id="endDate">
</div>

<h3>Executive Configuration</h3>
<div id="execConfig"></div>

<h3>Add Public Holiday</h3>
<div class="section">
Date: <input type="date" id="holidayDate">
Name: <input type="text" id="holidayName" placeholder="Example: Christmas">
<button onclick="addHoliday()">Add Holiday</button>
</div>

<h3>Override Sunday (Make Working)</h3>
<div class="section">
Date: <input type="date" id="workingSundayDate">
<button onclick="addWorkingSunday()">Add Working Sunday</button>
</div>

<div style="text-align:center;margin-top:20px;">
<button onclick="generateSchedule()">Generate Schedule</button>
<button onclick="window.print()">Export PDF</button>
</div>

<div id="scheduleArea"></div>

<div class="footer">
© Copyrights to Hesper
</div>

</div>

<script>

const executives = [
"ASMAA DAMI",
"EME GARDUCE",
"MARIA KATRINA",
"SAYEED BIN AMMARI",
"RICHARD SOLOMON",
"YEHIA ALY",
"JUNAID ALAM"
];

const weekdays = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];

let holidays = [];
let workingSundays = [];

function loadExecConfig(){
let table="<table><tr><th>Name</th><th>Shift</th><th>Half Day (Weekly)</th><th>Leave From</th><th>Leave To</th></tr>";

executives.forEach((exec,i)=>{
table+=`
<tr>
<td>${exec}</td>

<td>
<select id="shift${i}">
<option>Morning</option>
<option>Afternoon</option>
</select>
</td>

<td>
<select id="halfDay${i}">
<option value="">None</option>
${weekdays.map((d,idx)=>`<option value="${idx}">${d}</option>`).join("")}
</select>
</td>

<td><input type="date" id="leaveFrom${i}"></td>
<td><input type="date" id="leaveTo${i}"></td>

</tr>`;
});

table+="</table>";
document.getElementById("execConfig").innerHTML=table;
}

function addHoliday(){
let date=document.getElementById("holidayDate").value;
let name=document.getElementById("holidayName").value;

if(date && name){
holidays.push({date,name});
alert("Holiday Added Successfully");
}
}

function addWorkingSunday(){
let date=document.getElementById("workingSundayDate").value;

if(date){
let checkDate=new Date(date);
if(checkDate.getDay()!==0){
alert("Selected date is not Sunday.");
return;
}

if(!workingSundays.includes(date)){
workingSundays.push(date);
alert("Sunday marked as Working Day.");
}
}
}

function generateSchedule(){

let start=new Date(document.getElementById("startDate").value);
let end=new Date(document.getElementById("endDate").value);

if(!start || !end || start>end){
alert("Invalid Date Range");
return;
}

let table="<table><tr><th>Date</th>";
executives.forEach(exec=>table+=`<th>${exec}</th>`);
table+="</tr>";

for(let d=new Date(start); d<=end; d.setDate(d.getDate()+1)){

let dateStr=d.toISOString().split("T")[0];
let day=d.getDay();

let holidayObj=holidays.find(h=>h.date===dateStr);
let isWorkingSunday=workingSundays.includes(dateStr);

let rowClass="";
if(holidayObj) rowClass="holiday";
else if(day===0 && !isWorkingSunday) rowClass="sunday";

table+=`<tr class="${rowClass}"><td>${dateStr}${holidayObj?" - "+holidayObj.name:""}</td>`;

executives.forEach((exec,i)=>{

// 1️⃣ Holiday
if(holidayObj){
table+=`<td>Holiday</td>`;
return;
}

// 2️⃣ Leave
let leaveFrom=document.getElementById(`leaveFrom${i}`).value;
let leaveTo=document.getElementById(`leaveTo${i}`).value;

if(leaveFrom && leaveTo){
let from=new Date(leaveFrom);
let to=new Date(leaveTo);
if(d>=from && d<=to){
table+=`<td class="leave">Leave</td>`;
return;
}
}

// 3️⃣ Sunday (if not overridden)
if(day===0 && !isWorkingSunday){
table+=`<td>Off</td>`;
return;
}

// 4️⃣ Half Day
let halfDay=document.getElementById(`halfDay${i}`).value;
let shift=document.getElementById(`shift${i}`).value;

if(halfDay !== "" && parseInt(halfDay)===day){
table+=`<td class="halfday">${shift} (Half Day)</td>`;
return;
}

// 5️⃣ Normal Shift
table+=`<td>${shift}</td>`;

});

table+="</tr>";
}

table+="</table>";
document.getElementById("scheduleArea").innerHTML=table;
}

loadExecConfig();

</script>

</body>

</html>

